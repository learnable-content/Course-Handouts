# Introduction

Now we're going to turn the Mad Libs program into a web app.This time, we're going to use an HTML form to enter the data, though.To get started, create a file called web_madlibs.rb.This is the most complicated program we've created so far.But don't worry, it's not as bad as it looks if we break it down into chunks.First of all, it starts with a familiar,require sinatra that we use on all our web apps.Then this route handler here is quite straightforward.

# ERB

This states that if the user visits the route /madlibs,then we will use ERB to display a view called questions.A view is a piece of HTML code that gets displayed by the browser,and ERB stands for embedded ruby.And this is a templating engine.This is used to generate HTML.Now in this example we're going to be using inline views, which means that youwrite them at the bottom of the file after the end declaration that you can see here.The name of the view comes underneath and we can see it here.It starts with a double ampersand followed by its name which is questions.This is the same name given in the ram handler that called the view earlier.We go back to the top here, we can see that we called the viewcalled questions using the ERB method there.And if we go to the bottom, the name of the view is questions,starts with a double ampersand.Everything after this is, makes up the template for the view.Now this is actually just a bit of HTML that displays a form.And some of the input fieldscan be filled in with the information required from the user.And we can see it all here.Here's the HTML for the form and the different input fields.It's quite hard to visualize, though, just looking at the HTML.So the best thing to do is to have a look and see what it looks like in a browser.

# Starting the Server

Now what we have to do first is start a server.So we just go to the terminal.And enter ruby, and then the name of the file, which is web_madlibs.rb.I press enter, we can see that the server has started, and

# Testing the Application

to see what it looks like, we open a browser,go to localhost:4567which is the port that the server is running on, andthen we want /madlibs, which was the route in question.If I press enter, we can see this is what the form looks like.There's an input field for each word in our MadLib,as well as here a submit button at the bottom.Now if we go back to our code, we can see an important part ofthe form is here in the form element.

# Method Post

There are two very important attributes at the start.One is the first one.Method=post and the second is this action attribute.Now the first one tells sinatra to use the HTTP post verbto send the form to the route here in the action attribute,/madlibs.We can then create a route handler to deal with what happens when this formis posted.Now if we go back to the code, we can see this route handler here.And first of all, what we notice is the verb postat the beginning instead of the verb get.This is because in all of our previous route handlers,we've only been concerned with the getting of pages.This time we want to deal with a route that has been postedlike the one from our form.Now inside the block, after the route handler,we can see that the code deals with the information submitted by the form.Each of the input fields in the form has a name attribute that tells Sinatra

# Reviewing the Program

where to save the value entered in that field in the params hash.So, we go back to the form.We can see here, we have an inputelement here with the attribute name and the value of animal.If I go back to the route handler we can see that whatever is enteredin that input field will be stored in the params hash with a key of animal.We're actually going to save that to a variable called animal as well.And we can see here params color, this will take the valuefrom the input field here with the name of color, and so on and so on.It does it for each of the input fields.Each of these values will then be stored in a variableusing the same name we can see here.We have animal, color, person objects, objective and verb.And then, we use the same string that we used in our program earlier,that uses a bit of string interpolation to write down our Mad Lib.Now, just save that, and go back to the browser.I can test this out by filling in the form and submitting it.So, I think I'll fill in for animal I'll have a tiger andcolor, I'll go for orange.Type of person, a witch.Type of object, I think bucket and adjective,tame and a verb, we'll have cry.Now all I have to do is hit this button here andI can see that has been posted and the route handler has processed thatinformation from the form and outputted this message.The tame Tiger started to cry because the witch run away with the bucket.

# End of the Lesson

Brilliant, we've successfully turned our program into a working web app.Have some fun now filling in the form yourself and creating some funny Mad Libs.And that brings us to the end of this lesson.In the next lesson,we're going to be getting all mathematical by looking at numbers and control logic.In the meantime, if you have any questions or comments be sure to get in touch.